---
title: 7. 방전 회로
description: "E-포뮬러 제작기: HV 방전 회로"
category: e-formula
assets: /assets/posts/e-formula/2023-09-02-discharge
image: /assets/posts/e-formula/2023-09-02-discharge/resistor.jpg
layout: post
---

### 안내

**본문은 포럼의 [7. 방전 회로](https://dnf.luftaquila.io/t/e-formula/28) 에서 읽으실 수 있습니다.**

{% include_relative notice.md %}

{% include_relative index.md %}

## 개요
방전 회로는 길게 설명할 것도 없다. 앞서 초기 충전에서 살펴본 것처럼 모터 컨트롤러에는 정전용량 성분이 있다. 축전기에 저장되는 에너지는 <dfn>0.5 &times; CV<sup>2</sup></dfn> 이다. 440μF 축전지나 다름없는 컨트롤러에 294V를 충전하면 컨트롤러는 약 19J의 에너지를 저장한다. 이 에너지는 AIR를 닫아 HV를 비활성화해도 컨트롤러에 그대로 충전되어 있다. 똑같이 고전압인 만큼 작업자가 감전당할 위험이 있다.

일부 컨트롤러는 내부에 passive discharge resistor가 들어 있어 서서히 축전지가 자연 방전될 수 있도록 하기도 한다. 그러나 이 경우에도 방전이 상당히 오래 걸리기 때문에, 5초 이내에 구동시스템 전압이 LV 기준인 60V 밑으로 떨어져야 한다는 규정을 만족시킬 수 없다.

따라서 우리는 HV가 비활성화되었을 경우에만 컨트롤러의 HV 입력단에 저항을 연결해 잔류 고전압을 방전시켜야 한다. 초기충전 회로와 마찬가지로 간단하게 저항 하나와, 저항을 회로에서 떼었다 붙일 릴레이 하나만 있으면 된다. 

<div class='center'><img src='{{ page.assets }}/discharge_circuit.png' style='width: 70%'></div>

이전 글에서 본 초기충전 회로에 방전 회로를 추가했다. 이게 전부다. 방전 회로는 HVD를 분리해도 작동해야 하므로 HVD를 기준으로 HV 배터리가 아니라 모터 컨트롤러 쪽에 있어야 한다.

다만, 보다시피 방전 저항은 HV 배터리의 입장에서는 컨트롤러와 다를 것이 없는 부하이다. 즉, HV가 활성화되면 병렬로 연결되어 전기를 끌어다 쓰고 불타게 된다. 따라서 방전 저항은 주행 중에는 떨어져 있다가, HV가 비활성화되었을 때만 연결되어 방전을 수행해야 한다.

회로에서 방전 릴레이만 다른 릴레이를 추상화한 스위치들과 다르게 생긴 점에 주목하자. 방전 저항은 fail-safe하게 회로에 연결되어야 한다. 차량의 전체 전원이 끊겨도 방전을 할 수 있어야 한다는 뜻이다. 이를 위해 릴레이의 NC 단자를 사용한다. NC 단자를 사용하면 전원이 끊겼을 때 다른 별도의 절차 없이도 자연스럽게 방전 저항이 컨트롤러에 연결된다.

## 저항 선정
이제 마지막으로 초기충전과 방전에 사용할 저항을 고를 차례이다. 우선 회로에 이전 글에서 계산한 것처럼, 저항을 회로에 연결하는 순간의 초기 전류 <dfn>I<sub>0</sub> = 0.294A</dfn> 이다. 그리고 모터 컨트롤러의 축전지가 충/방전됨에 따라서 0A까지 지수적으로 감소한다. <dfn>t = 0</dfn>일 때의 전력 <dfn>P = V &times; I = 86.5W</dfn>가 된다. 그리고 이 충/방전은 3τ 정도가 지나면 사실상 완료되었다고 간주할 수 있다.

쉽게 생각하면 전력이 86.5W까지 올라가니 정격이 이보다 큰 저항기를 골라야 한다. 실제로 우리 팀은 지금까지 [HSC1001k0J](https://www.eleparts.co.kr/goods/view?no=3504248) 100W 저항을 사용해 왔다.

<div class='center'><img src='{{ page.assets }}/resistor.jpg'><br>과장 없이 정말로 주먹만 하다. 저항 주제에 개당 2만 원이나 한다.</div>

그러나 사실 이 정격 전력은 저항의 continuous power dissipation이다. 저항에서 내내 100W의 열이 발생해도 버틸 수 있다는 뜻이다. 반면 우리의 초기충전/방전 회로는 고작 2초에 불과한 시간 동안만 전기가 흐른다. 이러한 고전력 권선 저항들은 짧은 시간 동안은 정격보다 더 큰 발열도 처리할 수 있다. 우리 팀이 사용한 100W 저항의 데이터시트를 보자.

<div class='center'><img src='{{ page.assets }}/overload.png'></div>

1초 동안은 무려 정격의 25배, 2~3초 동안도 10배에 달하는 발열을 처리할 수 있다. 100W 저항을 2초만 쓸 거면 1kW도 버틸 수 있다는 뜻이다. 이렇게 크고 무식한 저항을 사용할 이유가 없다.

대신, 같은 시리즈의 [THS251k0J](https://www.eleparts.co.kr/goods/view?no=10307534) 저항을 보자. 이 저항은 최대 사용 가능 전압이 550V이고 정격 전력이 25W이다.

<div class='center'><img src='{{ page.assets }}/overload_2.png'></div>

그리고 이 저항 또한 3초 이내에서는 정격의 10배인 250W를 버틸 수 있다. 우리의 피크 전력인 86.5W를 상회하고도 남는다. 앞서 본 100W 저항이 65.5mm * 47.5mm의 무식한 저항이었던 반면 이 25W 저항은 29mm * 28mm로 4분의 1 크기에 불과하다. 게다가 가격도 2천 원으로 무려 10분의 1이다. 사용하지 않을 이유가 없다.

## 덧붙이는 말
우리 팀은 방전 저항 사고를 겪은 적이 있다. 방전 릴레이가 HV가 활성화되었을 때는 저항을 회로에서 분리해야 하는데, 깜빡하고 커넥터를 연결하지 않아 모터가 굴러가는 도중에도 방전 저항이 계속 HV 라인에 병렬로 연결되어 있었던 것이다.

다행히 주행을 한 것은 아니고 구동륜을 띄워둔 상태에서 최대 3A 정도의 HV를 수십 초 사용한 것이었지만 결과는 처참했다.

<div class='center'><img src='{{ page.assets }}/burnt.jpg' style='width: 70%'></div>

앞서 본 overload 표가 사실임을 입증하듯 저항 자체는 무사했다. 그러나 저항에서 나온 열이 ABS로 된 HV박스를 녹이고 뚫고 나가버렸다.

<div class='center'><img src='{{ page.assets }}/burnt2.jpg' style='width: 70%'></div>

HV의 위력을 체감할 수 있는 사고다. 100W 대신 25W 저항을 사용했다면 저항에서 불이 났을지 알 수 없는 일이다. 어떤 저항을 선택할지는 자유다.

{% include_relative index.md %}

</details>
